<!DOCTYPE html>
<html>

<head>
  <title>PORTAL</title>

  <!-- Viewport mobile tag for sensible mobile support -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <!--STYLES-->
  <link href="css/bootstrap.min.css" rel="stylesheet" media="screen">
  <link href="css/smoothness/jquery-ui-1.10.3.custom.min.css" rel="stylesheet" media="screen">
  <link rel="stylesheet" type="text/css" href="font-awesome/css/font-awesome.min.css" />
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="css/megam.css">
  <link rel="stylesheet" href="css/table.css">
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css"> -->
</head>

<body>

  <div class="navbar navbar-megam-inverse navbar-fixed-top">
    <div class="navbar-inner">
      <div class="container-fluid">
        <a class="brand" href="#">
          <img src="Meglytics_logo_1.png">
          <span class="red"></span>
        </a>
        <div class="btn-group pull-right">
          <a class="btn dropdown-toggle" data-toggle="dropdown" href="#"><i class="icon-align-justify"></i> <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li>
              <a id="btn-sidebar" tabindex="-1" href="#"><i class="icon-ok pull-right"></i><i class="icon-list-alt"></i> Sidebar</a>
            </li>
            <li class="divider"></li>
            <li>
              <a id="btn-node-status" tabindex="-1" href="#"><i class="icon-ok pull-right"></i><i class="icon-info-sign"></i> Node Status</a>
            </li>
            <li class="divider"></li>
            <li class="dropdown-submenu pull-left">
              <a tabindex="-1" href="#"><i class="icon-th-large"></i> Workspaces</a>
              <ul id="workspace-menu-list" class="dropdown-menu">
                <li>
                  <a id="btn-workspace-add" tabindex="-1" href="#"><i class="icon-plus"></i> Add</a>
                </li>
                <li>
                  <a id="btn-workspace-edit" tabindex="-1" href="#"><i class="icon-edit"></i> Rename</a>
                </li>
                <li>
                  <a id="btn-workspace-delete" tabindex="-1" href="#"><i class="icon-minus"></i> Delete</a>
                </li>
                <li class="divider"></li>
              </ul>
            </li>
            <li class="divider"></li>
            <li>
              <a id="btn-keyboard-shortcuts" tabindex="-1" href="#"><i class="icon-question-sign"></i> Keyboard Shortcuts</a>
            </li>
            <li>
              <a id="btn-help" tabindex="-1" href="http://www.megam.io/docs" target="_blank"><i class="icon-question-sign"></i> Help...</a>
            </li>
          </ul>
        </div>
        <div class="btn-group pull-right">
          <a id="btn-deploy" class="btn action-deploy" href="#"><i id="btn-icn-deploy" class="icon-upload"></i> Save</a>
        </div>
        <div class="btn-group pull-right">
          <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">
            Connectors
          </button>
        </div>
      </div>
    </div>
  </div>

  <div id="main-container" class="sidebar-closed">

    <div id="palette">

      <div id="palette-container" class="palette-scroll">
        <br/>
        <ul id="paletteList"></ul>
      </div>
      <div id="palette-search">
        <i class="icon-search"></i>
        <input id="palette-search-input" type="text" placeholder="filter">
        <a href="#" id="palette-search-clear"><i class="icon-remove"></i></a></input>
      </div>
      <br>
      <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">New Dashboard</button>

    </div>

    <div class="tab-pane" id="analysis">
      <form id="edit-profile2" class="form-vertical ">
        <div class="row ">
          <div class="span6 pull-right">
            <div class="widget ">
              <div class="widget-header">
                <i class="icon-bar-chart"></i>
                <h3>Chart-1</h3>
              </div>
              <div class="widget-content">
                <canvas id="barc" class="chart-holder" width="538" height="250"></canvas>
              </div>
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
  </div>
  </div>

  <!-- Modal

<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
         <div class="modal-dialog">
             <div class="modal-content">
                 <div class="modal-header">
                     <button type="button" class="close" data-dismiss="modal">
                         <span aria-hidden="true">&times;</span><span class="sr-only">Close</span>
                     </button>
                     <h4 class="modal-title" id="exampleModalLabel">Linechart</h4>
                 </div>
                 <div class="modal-body">
                     <canvas id="canvas" width="568" height="300"></canvas>
                 </div>
             </div>
         </div>
     </div> -->


  <div id="exampleModal" class="modal fade" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" data-dismiss="modal">
            &times;
          </button>
          <h4 class="modal-title">New Dashboard</h4>
        </div>
        <div class="modal-body">

          <br/> Query:
          <input type="text" name="host" id="host">
          <br/>
          <button type="button" class="btn btn-default" id="analyze">
            Analyze
          </button>
          <canvas id="canvas" width="568" height="300"></canvas>


          <!-- </form> -->
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">
            Close
          </button>
        </div>
      </div>

    </div>
  </div>


  <script src="js/jquery-1.9.0.js"></script>
  <script src="js/jquery-ui-1.9.2-min.js"></script>
  <script src="js/jquery.jsPlumb-1.5.3.js"></script>
  <script src="js/dom.jsPlumb.js"></script>

  <!--<script src="jquery/js/jquery-1.9.1.js"></script>-->
  <script src="js/bootstrap.min.js"></script>
  <script src="js/chance.min.js"></script>
  <script src="js/jquery-ui-1.10.3.custom.min.js"></script>
  <script src="js/jquery.ui.touch-punch.min.js"></script>
  <script src="portal/main.js"></script>
  <script src="portal/nodes.js"></script>
  <script src="portal/ui/palette.js"></script>
  <script src="portal/ui/notifications.js"></script>
  <script src="portal/ui/view.js"></script>
  <script src="portal/ui/plumb.js"></script>
  <script src="portal/ui/sidebar.js"></script>
  <script src="js/d3.v3.min.js"></script>


  <script type="text/javascript" src="assets/jquery-1.7.2.min.js"></script>
  <script type="text/javascript" src="assets/excanvas.min.js"></script>
  <script type="text/javascript" src="assets/chart.min.js" type="text/javascript"></script>
  <script type="text/javascript" src="assets/bootstrap.js"></script>
  <script type="text/javascript" src="assets/base.js"></script>
  <script src="motel/main.js"></script>
  <script type="text/javascript" src="assets/toastr.js"></script>

  <!--SCRIPTS END-->

  <script>
    var data = {
      labels: ["2014", "2013", "2012", "2011", "2010"],
      datasets: [{
        fillColor: "rgba(220,220,220,0.5)",
        strokeColor: "rgba(220,220,220,1)",
        data: [626, 4, 4, 2, 4]
      }]
    }

    function getQueryData() {
      //ajax call here
      //find range of the the x and y axis
      return [66, 33, 4411, 77]
    };




    $('#exampleModal').on('show.bs.modal', function(event) {

      var button = $(event.relatedTarget);
      var modal = $(this);
      var canvas = modal.find('.modal-body canvas');

      $("#analyze").click(function() {
        data.datasets[0].data = getQueryData();
        var myNewChart = new Chart(ctx);
        myNewChart.Line(data);
      });

      var ctx = canvas[0].getContext("2d");
      var optionsNoAnimation = {
        animation: false
      }
      var myNewChart = new Chart(ctx);
      myNewChart.Line(data);
      // Chart initialisieren
      /*  var ctx = canvas[0].getContext("2d");
        var chart = new Chart(ctx).Line({
            labels: ["January", "February", "March", "April", "May", "June", "July"],
            datasets: [
                {
                    fillColor: "rgba(190,144,212,0.2)",
                    strokeColor: "rgba(190,144,212,1)",
                    pointColor: "rgba(190,144,212,1)",
                    pointStrokeColor: "#fff",
                    pointHighlightFill: "#fff",
                    pointHighlightStroke: "rgba(220,220,220,1)",
                    data: data
                },
                {
                    fillColor: "rgba(151,187,205,0.2)",
                    strokeColor: "rgba(151,187,205,1)",
                    pointColor: "rgba(151,187,205,1)",
                    pointStrokeColor: "#fff",
                    pointHighlightFill: "#fff",
                    pointHighlightStroke: "rgba(151,187,205,1)",
                    data: [3,66,111,44,99]
                }
            ]
        }, {}); */
    });

    /*
    $('#modChart').on('show.bs.modal',function(event){
        var link = $(event.relatedTarget);
        // get data source
        var source = link.attr('data-source').split(',');
        // get title
        var title = link.html();
        // get labels
        var table = link.parents('table');
        var labels = [];
        $('#'+table.attr('id')+'>thead>tr>th').each(function(index,value){
            // without first column
            if(index>0){labels.push($(value).html());}
        });
        // get target source
        var target = [];
        $.each(labels, function(index,value){
            target.push(link.attr('data-target-source'));
        });
        // Chart initialisieren
        var modal = $(this);
        var canvas = modal.find('.modal-body canvas');
        modal.find('.modal-title').html(title);
        var ctx = canvas[0].getContext("2d");
        var chart = new Chart(ctx).Line({
            responsive: true,
            labels: labels,
            datasets: [{
                fillColor: "rgba(151,187,205,0.2)",
                strokeColor: "rgba(151,187,205,1)",
                pointColor: "rgba(151,187,205,1)",
                pointStrokeColor: "#fff",
                pointHighlightFill: "#fff",
                pointHighlightStroke: "rgba(151,187,205,1)",
                data: source
            },{
                fillColor: "rgba(220,220,220,0.2)",
                strokeColor: "#F7464A",
                pointColor: "#FF5A5E",
                pointStrokeColor: "#FF5A5E",
                pointHighlightFill: "#fff",
                pointHighlightStroke: "red",
                data: target
            }]
        },{});
    }).on('hidden.bs.modal',function(event){
        // reset canvas size
        var modal = $(this);
        var canvas = modal.find('.modal-body canvas');
        canvas.attr('width','568px').attr('height','300px');
        // destroy modal
        $(this).data('bs.modal', null);
    }); */
  </script>

</body>

</html>
